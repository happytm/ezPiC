# e·z·Pi·c
[ˌiːzi ˈpiːzi]
All-in-one web configurable IoT device in (Micro-)Python...

# *>>> UNDER CONSTRUCTION <<<*

-----------------------------

## Features, Techniques and why

Goal:
* Like ESPEasy a web configurable IoT device
* Usage of IoT devices by hobbyists without progrmming expirence
* Adding plugins with low/mid level Python knowlage
* Append plugins by community (GitHub)
* Open source

Platform:
* RaspberryPi, \*Pi (initially planned)
* PC (for development and debugging)
* ESP32 (maybe)

Programming Lanuage:
* CPython 3.4.x or higher
* In discussion: Hybrid of CPython 3.4.x and MicroPython 1.9.3

User GUI:
* Web server front end on the platform based on flask (in discussion: MicroWebSrv)

User CLI:
* All funcionalitys are accessable by a command line interface via HTTP GET request, web page (HTML form), telnet, ...

Plugin system:
* Easiely extend by anyone
* Unloadable plugins (import fails) are dismissed and don't affect other plugins
* If nessecary intall with reduced plugin count

* device-plugins:
  * Interface to hardware sensors and actors
  * Deliver measurements (e.g. temperature, switch on/off, ...) to active gateway-plugins, rules, web interface, ...
  * Each device has its own partial web page form for configuration
  * A device can be instanciated multiple times

* gateway-plugins:
  * Interface to external servers and brokers
  * Consume measurements (e.g. temperature, switch on/off, ...) and deliver them to the configured server (e.g. MQTT, HTTP, Socket, InfluxDB, ...)
  * Can also support hardware access to transmission modules (e.g. LoRaWan, Philips Hue, ...)
  * Each gateway has its own partial web page form for configuration
  * A gateway can be instanciated multiple times

* command-plugins:
  * Extend cli with additional commands

* rule-plugins:
  * Add rules to react on new measurements and call cli commands
  * Each rule has its own partial web page form for configuration

* web-plugins:
  * Extend web front end with additional pages

Front-end-Languages:
* Initial: English
* Later: localisation

-----------------------------------------

## Overview Plugin System

### Devices

A Device is usually a pice of hardware which provides measurement data or control external hardware.

The Framework distinguishs between active and passive devices. 
* An active device notifies the gateway by itself if a new measurement (or state) arrives, e.g. a packed arrived via serial interface, a door was opened and a sensor triggers. Generally spoken: a event is generated where ezPiC has no influence on it.
* A passive device is time triggered periodically by the framework to aquire data from the hardware. A typical device here is a temperature sensor.

### Gateways

...

### Commands

...

### Rules

...

### Web

...

--------------------------------

## Framework

### Values

Value are typically generated by devices but also rules and can be consumed by gateways and rules. Additionaly they can  displayed at GUI and logged in a file (data logger). 

A value entry is based on a key value (content) pair with additional meta data (time, change flag, source, decimal place, unit)

The key of the value is a string with separators. 
"\<unit\>/\<device\>/\<channel\>"

The content can be any data type of Python, typically int, float, string. A conversion to string is done at the end of the data flow (e.g. gateway, web page)

### CLI

...
